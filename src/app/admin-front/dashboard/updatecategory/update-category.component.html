<ng-container *ngIf="data; else error">
  <!-- Title-container -->
  <div class="w-full flex py-2.5 px-0 gap-2.5">
    <button type="button" class="md:px-2.5 border-[var(--border-outline)] border" (click)="returnToCategoryComponent()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
           class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"/>
      </svg>
    </button>
    <h1 class="text-base capitalize">Updating {{ data.category }}</h1>
  </div>

  <div class="w-full h-full flex gap-2.5">

    <!-- Category Column -->
    <div class="flex-1">
      <div class="">
        <h1 class="capitalize mb-0">details</h1>
      </div>

      <form class="w-full flex flex-col py-6 gap-2.5" [formGroup]="reactiveForm">

        <!-- Input box -->
        <div
          class="p-6 flex flex-col gap-2.5 text-left rounded-md border border-[var(--active)] border-solid bg-[var(--white)]">
          <h4 class="txt capitalize">name <span [style]="'color: red'">*</span></h4>
          <input
            formControlName="name"
            placeholder="category name"
            type="text"
            class="p-2.5 w-full flex-1 inline rounded-sm border border-solid border-[var(--border-outline)]"
          />
        </div>

        <!-- Radio -->
        <div class="p-6 text-left rounded-md border border-[var(--active)] border-solid bg-[var(--white)]">
          <h4 class="txt capitalize">visibility (include in store front) <span [style]="'color: red'">*</span></h4>
          <mat-radio-group aria-label="Select an option" formControlName="visible">
            <mat-radio-button [value]="false" [checked]="!data.visible">false</mat-radio-button>
            <mat-radio-button [value]="true" [checked]="data.visible">true</mat-radio-button>
          </mat-radio-group>
        </div>

        <!-- Button container -->
        <div class="p-2.5 px-1.5 flex justify-between">
          <button mat-stroked-button color="warn" [style.border-color]="'red'" type="button" (click)="clear()">
            Cancel
          </button>
          <button
            type="submit"
            class="capitalize text-white font-bold py-2 px-4 rounded bg-[var(--app-theme)]"
            [disabled]="!reactiveForm.valid"
            [style]="{ 'background-color': reactiveForm.valid ? 'var(--app-theme-hover)' : 'var(--app-theme)' }"
            [asyncButton]="update()"
          >update</button>
        </div>

      </form>
    </div>

    <!-- Product Table Column -->
    <div class="max-h-3/5 overflow-auto flex-1 p-2">

      <div class="flex flex-col h-full w-full py-0">
        <div class="mb-2">
          <h1 class="capitalize">associated products</h1>
        </div>

        <div class="flex-1 rounded-md border border-[var(--active)] border-solid bg-[var(--white)]"
             *ngIf="data$ | async as data" [ngSwitch]="data.state">
          <ng-container *ngSwitchCase="'LOADING'">
            <div class="h-full p-20 flex justify-center items-center">
              <h1 class="capitalize text-[var(--app-theme-hover)]">
                loading...
              </h1>
            </div>
          </ng-container>

          <ng-container *ngSwitchCase="'ERROR'">
            <div class="p-10 capitalize text-3xl text-red-500">
              Error {{ data.error }}
            </div>
          </ng-container>

          <ng-container *ngSwitchCase="'LOADED'">
            <ng-container *ngIf="data.data">
              <app-dynamic-table
                [paginationTable]="true"
                [detail]="true"
                [pageData]="data.data"
                [tHead]="thead"
              ></app-dynamic-table>
            </ng-container>

          </ng-container>
        </div>
      </div>

    </div>

  </div>
</ng-container>

<ng-template #error>
  <div class="lg-scr p-10 text-3xl text-red-500">
    <button type="button" class="md:px-2.5 border-[var(--border-outline)] border" (click)="returnToCategoryComponent()">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
           class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"/>
      </svg>
    </button>
    An error occurred
  </div>
</ng-template>
